services:
  claude:
    build:
      context: .
    volumes:
      # Mount repos
      - ../../:/workspace
      - ~/code/ziliang:/home/node/code/ziliang
      - ~/code/world:/home/node/code/world
      # Mount container home directory (for .config, etc)
      - ~/.claude/sandboxed-home:/home/node
      # Mount Claude config (selective - only what sandbox needs)
      - ~/.claude/CLAUDE.md:/home/node/.claude/CLAUDE.md:rw
      - ~/.claude/memory:/home/node/.claude/memory:rw
      - ~/.claude/skills:/home/node/.claude/skills:rw
      # Mount git config for commits
      - ~/.gitconfig:/home/node/.gitconfig:ro
      # Note: SSH keys are in ~/.claude/sandboxed-home/.ssh (dedicated sandbox key)
    stdin_open: true
    tty: true
